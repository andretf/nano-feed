var nanofeed=function(){"use strict";function e(e){return Array.isArray(e)?(e=e.filter(function(e){return["title","link","date","description"].indexOf(e)>-1}),e.length||(e=r.fields)):e=r.fields,e.map(function(e){return"date"===e?"item.pubDate":"item."+e}).join(",")}function t(e,t){var r=new XMLHttpRequest;r.onload=function(){var e;try{e=JSON.parse(r.responseText)}catch(n){return}return t(e)},r.open("GET",e,!0),r.send()}var r={fields:["title","link"],qty:5};return{fetch:function(n,i,a){if("string"==typeof n)n=[n];else if(!Array.isArray(n)||!n.length)return this;"function"==typeof i&&(a=i,i=r),i.qty=isNaN(i.qty)?r.qty:parseInt(i.qty);var u={baseUrl:"//query.yahooapis.com/v1/public/yql?format=json&callback=&crossProduct=optimized&env=http://datatables.org/alltables.env",template:'SELECT {COLS} FROM query.multi WHERE queries=\'SELECT title,link,pubDate,description FROM rss WHERE url in ("{URLS}")|UNIQUE(field="title",hideRepeatCount="true")|UNIQUE(field="link",hideRepeatCount="true")|SORT(field="pubDate",descending="true")|TRUNCATE({QTY})\''},l=u.template.replace("{COLS}",e(i.fields)).replace("{URLS}",n.join('","')).replace("{QTY}",i.qty),o=u.baseUrl+"&q="+encodeURIComponent(l);return t(o,function(e){if(e&&e.query&&e.query.count>=0){var t=[];if(e.query.count)try{var r=e.query.results.results.item;t=r.length?r:[r],i.fields.indexOf("date")>-1&&t.forEach(function(e){e.pubDate=new Date(e.pubDate)})}catch(n){}return a(t)}}),this}}}();